<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media Usage and Dependence Diagnostics</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0c0c0c 0%, #1a1a2e 50%, #16213e 100%);
            color: #ffffff;
            height: 100vh;
            padding: 10px;
            overflow: hidden;
        }

        /* Form Styles */
        .form-container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            height: calc(100vh - 20px);
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .form-header {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px 0;
            border-bottom: 2px solid rgba(220, 53, 69, 0.3);
        }

        .form-header h1 {
            font-size: 2em;
            color: #dc3545;
            margin-bottom: 8px;
            text-shadow: 0 0 20px rgba(220, 53, 69, 0.5);
        }

        .form-header .version {
            font-size: 1em;
            color: #adb5bd;
            font-weight: 300;
        }

        .form-content {
            flex: 1;
            overflow-y: auto;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .reception-header {
            grid-column: 1 / -1;
            font-size: 1.1em;
            font-weight: 600;
            color: #dc3545;
            margin-top: 15px;
            margin-bottom: -5px;
            padding-bottom: 5px;
            border-bottom: 1px solid rgba(220, 53, 69, 0.2);
        }

        .form-group label {
            display: block;
            color: #ffffff;
            font-size: 0.9em;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .input-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group input[type="text"],
        .form-group input[type="email"],
        .form-group input[type="number"],
        .form-group select {
            width: 100%;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            color: #ffffff;
            font-size: 0.9em;
        }
        
        .form-group input[type="number"] {
            width: 80px;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #dc3545;
            box-shadow: 0 0 10px rgba(220, 53, 69, 0.3);
        }

        .slider-group {
            margin-top: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .slider-wrapper {
            flex: 1;
        }

        .slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: rgba(255, 255, 255, 0.2);
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #dc3545;
            cursor: pointer;
        }

        .slider::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #dc3545;
            cursor: pointer;
            border: none;
        }

        .slider-value {
            text-align: center;
            margin-top: 5px;
            color: #dc3545;
            font-weight: bold;
        }

        .submit-btn {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(220, 53, 69, 0.3);
        }

        /* Dashboard Styles */
        .dashboard-container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 12px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            height: calc(100vh - 20px);
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .header {
            text-align: center;
            margin-bottom: 12px;
            padding: 8px 0;
            border-bottom: 2px solid rgba(220, 53, 69, 0.3);
            flex-shrink: 0;
        }

        .header h1 {
            font-size: 1.6em;
            color: #dc3545;
            margin-bottom: 4px;
            text-shadow: 0 0 20px rgba(220, 53, 69, 0.5);
            line-height: 1.2;
        }

        .header .version {
            font-size: 0.9em;
            color: #adb5bd;
            font-weight: 300;
        }

        .user-info {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 12px;
            margin-bottom: 12px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            flex-shrink: 0;
            align-items: center;
        }

        .user-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
        }

        .detail-item {
            background: rgba(0, 0, 0, 0.2);
            padding: 8px 12px;
            border-radius: 6px;
            border-left: 3px solid #dc3545;
        }

        .detail-item label {
            color: #6c757d;
            font-size: 0.75em;
            display: block;
            margin-bottom: 2px;
        }

        .detail-item span {
            color: #ffffff;
            font-size: 0.85em;
            font-weight: 500;
            word-break: break-all;
            line-height: 1.1;
        }

        .overall-score {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .score-circle {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            margin-bottom: 4px;
        }

        .score-circle::before {
            content: '';
            width: 52px;
            height: 52px;
            border-radius: 50%;
            background: #1a1a2e;
            position: absolute;
        }

        .score-text {
            position: relative;
            z-index: 1;
            font-size: 1.3em;
            font-weight: bold;
            color: #dc3545;
        }

        .score-label {
            color: #adb5bd;
            font-size: 0.75em;
            margin-bottom: 4px;
        }

        .score-category {
            font-size: 0.8em;
            font-weight: bold;
            margin-bottom: 4px;
            color: #e9ecef;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 12px 0;
            flex-shrink: 0;
        }

        .metric-card {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            padding: 10px 8px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .metric-circle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin: 0 auto 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .metric-circle::before {
            content: '';
            width: 38px;
            height: 38px;
            border-radius: 50%;
            background: #1a1a2e;
            position: absolute;
        }

        .metric-value {
            position: relative;
            z-index: 1;
            font-size: 0.95em;
            font-weight: bold;
            color: #dc3545;
        }
        
        .metric-category {
            font-size: 0.7em;
            font-weight: bold;
            margin-bottom: 4px;
            color: #e9ecef;
        }

        .metric-label {
            color: #ffffff;
            font-size: 0.7em;
            line-height: 1.1;
        }

        .charts-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 12px 0;
            flex: 1;
            min-height: 200px;
            max-height: 220px;
        }

        .chart-container {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            padding: 10px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            height: 100%;
            position: relative;
            overflow: hidden;
        }

        .chart-canvas {
            position: absolute;
            top: 35px;
            left: 10px;
            right: 10px;
            bottom: 10px;
        }

        .chart-title {
            color: #ffffff;
            font-size: 0.85em;
            margin-bottom: 8px;
            text-align: center;
            font-weight: 600;
            line-height: 1.1;
        }

        .platform-analysis {
            grid-column: 1 / -1;
            height: auto;
            padding: 10px;
            flex-shrink: 0;
            margin-top: 10px;
        }

        .platform-item {
            display: flex;
            align-items: center;
            margin-bottom: 6px;
            padding: 6px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 6px;
        }

        .platform-label {
            width: 160px;
            color: #ffffff;
            font-weight: 500;
            font-size: 0.8em;
            flex-shrink: 0;
        }

        .platform-bar {
            flex: 1;
            height: 16px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            margin: 0 10px;
            overflow: hidden;
        }

        .platform-fill {
            height: 100%;
            border-radius: 8px;
            transition: width 0.8s ease, background 0.5s ease;
        }

        .platform-value {
            font-weight: bold;
            min-width: 90px;
            font-size: 0.85em;
            text-align: right;
            display: flex;
            align-items: baseline;
            justify-content: flex-end;
            gap: 5px;
            color: #dc3545;
        }

        .platform-category {
            font-size: 0.8em;
            font-weight: normal;
            opacity: 0.8;
            color: #e9ecef;
        }

        .footer {
            margin-top: 8px;
            padding: 8px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 6px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.05);
            flex-shrink: 0;
        }

        .footer-text {
            color: #6c757d;
            font-size: 0.65em;
            line-height: 1.2;
        }

        .hidden {
            display: none !important;
        }

        .back-btn {
            display: none;
        }

        @media (max-width: 768px) {
            .charts-section {
                grid-template-columns: 1fr;
            }

            .user-info {
                grid-template-columns: 1fr;
            }

            .metrics-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .form-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div id="formContainer" class="form-container">
        <div class="form-header">
            <h1>Media Usage and Dependence Diagnostics</h1>
            <div class="version">(MUDD version 1.1 Beta)</div>
        </div>

        <div class="form-content">
            <form id="muddForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="name">Name *</label>
                        <input type="text" id="name" name="name" required>
                    </div>

                    <div class="form-group">
                        <label for="age">Age *</label>
                        <input type="number" id="age" name="age" min="1" max="120" required>
                    </div>

                    <div class="form-group">
                        <label for="gender">Gender *</label>
                        <select id="gender" name="gender" required>
                            <option value="">Select Gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                            <option value="Prefer not to say">Prefer not to say</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="email">Email Address *</label>
                        <input type="email" id="email" name="email" required>
                    </div>

                    <div class="form-group">
                        <label for="timeSpent">Time Spent with Media (%)</label>
                        <div class="slider-group">
                            <input type="range" id="timeSpent" name="timeSpent" min="0" max="100" value="50" class="slider">
                            <input type="number" id="timeSpentInput" min="0" max="100" value="50" class="form-input">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="appUsage">Media Application Usage Analysis (%)</label>
                        <div class="slider-group">
                            <input type="range" id="appUsage" name="appUsage" min="0" max="100" value="50" class="slider">
                            <input type="number" id="appUsageInput" min="0" max="100" value="50" class="form-input">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="messageProficiency">Media Message Proficiency (%)</label>
                        <div class="slider-group">
                            <input type="range" id="messageProficiency" name="messageProficiency" min="0" max="100" value="50" class="slider">
                            <input type="number" id="messageProficiencyInput" min="0" max="100" value="50" class="form-input">
                        </div>
                    </div>

                    <h3 class="reception-header">Media Message Reception Analysis</h3>

                    <div class="form-group">
                        <label for="learning">1. Learning (%)</label>
                        <div class="slider-group">
                            <input type="range" id="learning" name="learning" min="0" max="100" value="50" class="slider">
                            <input type="number" id="learningInput" min="0" max="100" value="50" class="form-input">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="productivity">2. Productivity (%)</label>
                        <div class="slider-group">
                            <input type="range" id="productivity" name="productivity" min="0" max="100" value="50" class="slider">
                            <input type="number" id="productivityInput" min="0" max="100" value="50" class="form-input">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="utility">3. Utility and Services (%)</label>
                        <div class="slider-group">
                            <input type="range" id="utility" name="utility" min="0" max="100" value="50" class="slider">
                            <input type="number" id="utilityInput" min="0" max="100" value="50" class="form-input">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="gaming">4. Gaming (%)</label>
                        <div class="slider-group">
                            <input type="range" id="gaming" name="gaming" min="0" max="100" value="50" class="slider">
                            <input type="number" id="gamingInput" min="0" max="100" value="50" class="form-input">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="socialMedia">5. Social Media (%)</label>
                        <div class="slider-group">
                            <input type="range" id="socialMedia" name="socialMedia" min="0" max="100" value="50" class="slider">
                            <input type="number" id="socialMediaInput" min="0" max="100" value="50" class="form-input">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="information">6. Information (%)</label>
                        <div class="slider-group">
                            <input type="range" id="information" name="information" min="0" max="100" value="50" class="slider">
                            <input type="number" id="informationInput" min="0" max="100" value="50" class="form-input">
                        </div>
                    </div>


                    <div class="form-group">
                        <label for="authenticity">Authenticity of Media Messages</label>
                        <div class="slider-group">
                            <input type="range" id="authenticity" name="authenticity" min="0" max="100" value="50" class="slider">
                            <input type="number" id="authenticityInput" min="0" max="100" value="50" class="form-input">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="credibility">Credibility of Media Messages</label>
                        <div class="slider-group">
                            <input type="range" id="credibility" name="credibility" min="0" max="100" value="50" class="slider">
                            <input type="number" id="credibilityInput" min="0" max="100" value="50" class="form-input">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="reliability">Reliability of Media Messages</label>
                        <div class="slider-group">
                            <input type="range" id="reliability" name="reliability" min="0" max="100" value="50" class="slider">
                            <input type="number" id="reliabilityInput" min="0" max="100" value="50" class="form-input">
                        </div>
                    </div>
                    
                    <h3 class="reception-header">Media Platform Analysis</h3>

                    <div class="form-group">
                        <label for="mediaAppLoad">1. Media Application Load (%)</label>
                        <div class="slider-group">
                            <input type="range" id="mediaAppLoad" name="mediaAppLoad" min="0" max="100" value="50" class="slider">
                            <input type="number" id="mediaAppLoadInput" min="0" max="100" value="50" class="form-input">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="mediaUsageLoad">2. Media Usage Load (%)</label>
                        <div class="slider-group">
                            <input type="range" id="mediaUsageLoad" name="mediaUsageLoad" min="0" max="100" value="50" class="slider">
                            <input type="number" id="mediaUsageLoadInput" min="0" max="100" value="50" class="form-input">
                        </div>
                    </div>
                </div>

                <button type="submit" class="submit-btn">Generate Dashboard</button>
            </form>
        </div>
    </div>

    <div id="dashboardContainer" class="dashboard-container hidden">
        <div class="header">
            <h1>Media Usage and Dependence Diagnostics</h1>
            <div class="version">(MUDD version 1.1 Beta)</div>
        </div>

        <div class="user-info">
            <div class="user-details">
                <div class="detail-item">
                    <label>Name:</label>
                    <span id="displayName">-</span>
                </div>
                <div class="detail-item">
                    <label>Age:</label>
                    <span id="displayAge">-</span>
                </div>
                <div class="detail-item">
                    <label>Gender:</label>
                    <span id="displayGender">-</span>
                </div>
                <div class="detail-item">
                    <label>Email ID:</label>
                    <span id="displayEmail">-</span>
                </div>
            </div>
            <div class="overall-score">
                <div class="score-label">Overall Score</div>
                <div class="score-circle" id="overallScoreCircle">
                    <div class="score-text" id="overallScoreText">0%</div>
                </div>
                <div class="score-category" id="overallScoreCategory">-</div>
            </div>
        </div>

        <div class="metrics-grid">
            <div class="metric-card">
                <div class="metric-circle" id="timeSpentCircle">
                    <div class="metric-value" id="timeSpentDisplay">0%</div>
                </div>
                <div class="metric-category" id="timeSpentCategory">-</div>
                <div class="metric-label">Time spent with<br>Media</div>
            </div>
            <div class="metric-card">
                <div class="metric-circle" id="messageReceptionCircle">
                    <div class="metric-value" id="messageReceptionDisplay">0%</div>
                </div>
                 <div class="metric-category" id="messageReceptionCategory">-</div>
                <div class="metric-label">Media Message<br>Reception Analysis</div>
            </div>
            <div class="metric-card">
                <div class="metric-circle" id="appUsageCircle">
                    <div class="metric-value" id="appUsageDisplay">0%</div>
                </div>
                <div class="metric-category" id="appUsageCategory">-</div>
                <div class="metric-label">Media Applications<br>Usage Analysis</div>
            </div>
            <div class="metric-card">
                <div class="metric-circle" id="messageProficiencyCircle">
                    <div class="metric-value" id="messageProficiencyDisplay">0%</div>
                </div>
                <div class="metric-category" id="messageProficiencyCategory">-</div>
                <div class="metric-label">Media Message<br>Proficiency</div>
            </div>
        </div>

        <div class="charts-section">
            <div class="chart-container">
                <div class="chart-title">Media Message Reception Analysis</div>
                <div class="chart-canvas">
                    <canvas id="receptionChart"></canvas>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-title">Media Platform Analysis</div>
                <div class="chart-canvas">
                    <canvas id="platformChart"></canvas>
                </div>
            </div>
        </div>

        <div class="chart-container platform-analysis">
            <div class="chart-title">Media Message Proficiency</div>
            <div class="platform-item">
                <div class="platform-label">Authenticity of Media Messages</div>
                <div class="platform-bar">
                    <div class="platform-fill" id="authenticityBar" style="width: 0%;"></div>
                </div>
                <div class="platform-value">
                    <span id="authenticityDisplay">0</span>
                    <span class="platform-category" id="authenticityCategory"></span>
                </div>
            </div>
            <div class="platform-item">
                <div class="platform-label">Credibility of Media Messages</div>
                <div class="platform-bar">
                    <div class="platform-fill" id="credibilityBar" style="width: 0%;"></div>
                </div>
                <div class="platform-value">
                    <span id="credibilityDisplay">0</span>
                    <span class="platform-category" id="credibilityCategory"></span>
                </div>
            </div>
            <div class="platform-item">
                <div class="platform-label">Reliability of Media Messages</div>
                <div class="platform-bar">
                    <div class="platform-fill" id="reliabilityBar" style="width: 0%;"></div>
                </div>
                <div class="platform-value">
                     <span id="reliabilityDisplay">0</span>
                     <span class="platform-category" id="reliabilityCategory"></span>
                </div>
            </div>
        </div>

        <div class="footer">
            <div class="footer-text">
                This tool is to measure a media usage and participation measure tool developed by <strong>Assistant Professor Dr. Gnana D. Hans</strong> and<br>
                <strong>Mr. S. Augustin Jesuvadian Research scholar</strong>, as part of their Research on Information Overload. For clarifications - mudds2025@gmail.com
            </div>
        </div>
    </div>

    <script>
        let receptionChartInstance = null;
        let platformChartInstance = null;

        const BASE_COLOR = '220, 53, 69'; // The base red color in RGB

        const STYLES = {
            LIGHT: { category: 'Light', fill: `rgba(${BASE_COLOR}, 0.3)` },
            MODERATE: { category: 'Moderate', fill: `rgba(${BASE_COLOR}, 0.65)` }, // Used for circles
            HEAVY: { category: 'Heavy', fill: `rgba(${BASE_COLOR}, 1.0)` }
        };

        function getCategoryAndStyle(value) {
            const val = parseFloat(value);
            if (val <= 33.3) return STYLES.LIGHT;
            if (val >= 33.4 && val <= 66.6) return STYLES.MODERATE;
            return STYLES.HEAVY;
        }

        document.addEventListener('DOMContentLoaded', () => {
            const sliders = document.querySelectorAll('.slider-group .slider');
            sliders.forEach(slider => {
                const numberInput = slider.nextElementSibling;
                slider.addEventListener('input', () => { numberInput.value = slider.value; });
                numberInput.addEventListener('input', () => {
                    const value = parseInt(numberInput.value);
                    if (!isNaN(value) && value >= 0 && value <= 100) { slider.value = value; }
                });
            });
        });
        
        document.getElementById('muddForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const data = {
                name: document.getElementById('name').value, age: document.getElementById('age').value,
                gender: document.getElementById('gender').value, email: document.getElementById('email').value,
                timeSpent: document.getElementById('timeSpent').value, appUsage: document.getElementById('appUsage').value,
                messageProficiency: document.getElementById('messageProficiency').value, authenticity: document.getElementById('authenticity').value,
                credibility: document.getElementById('credibility').value, reliability: document.getElementById('reliability').value,
                learning: document.getElementById('learning').value, productivity: document.getElementById('productivity').value,
                utility: document.getElementById('utility').value, gaming: document.getElementById('gaming').value,
                socialMedia: document.getElementById('socialMedia').value, information: document.getElementById('information').value,
                mediaAppLoad: document.getElementById('mediaAppLoad').value, mediaUsageLoad: document.getElementById('mediaUsageLoad').value
            };
            const receptionValues = [
                parseInt(data.learning), parseInt(data.productivity), parseInt(data.utility),
                parseInt(data.gaming), parseInt(data.socialMedia), parseInt(data.information)
            ];
            const avgReception = Math.round(receptionValues.reduce((a, b) => a + b, 0) / receptionValues.length);
            const overallScore = Math.round((
                parseInt(data.timeSpent) + avgReception + parseInt(data.appUsage) + parseInt(data.messageProficiency)
            ) / 4);
            updateDashboard(data, overallScore, avgReception);
            showDashboard();
        });

        function updateDashboard(data, overallScore, avgReception) {
            document.getElementById('displayName').textContent = data.name;
            document.getElementById('displayAge').textContent = data.age;
            document.getElementById('displayGender').textContent = data.gender;
            document.getElementById('displayEmail').textContent = data.email;

            updateVisualElement('overallScore', overallScore);
            updateVisualElement('timeSpent', data.timeSpent);
            updateVisualElement('messageReception', avgReception);
            updateVisualElement('appUsage', data.appUsage);
            updateVisualElement('messageProficiency', data.messageProficiency);

            updateProficiencyBar('authenticity', data.authenticity);
            updateProficiencyBar('credibility', data.credibility);
            updateProficiencyBar('reliability', data.reliability);

            const receptionData = [ data.learning, data.productivity, data.utility, data.gaming, data.socialMedia, data.information ];
            createReceptionChart(receptionData);
            
            const platformData = [data.mediaAppLoad, data.mediaUsageLoad];
            createPlatformChart(platformData);
        }

        function updateVisualElement(baseId, value) {
            const style = getCategoryAndStyle(value);
            const displayEl = document.getElementById(baseId + 'Display');
            const categoryEl = document.getElementById(baseId + 'Category');
            const circleEl = document.getElementById(baseId + 'Circle');
            const textEl = document.getElementById(baseId + 'Text');

            if (displayEl) displayEl.textContent = value + '%';
            if (textEl) textEl.textContent = value + '%';
            if (categoryEl) categoryEl.textContent = style.category;
            
            if (circleEl) {
                const degrees = (value / 100) * 360;
                circleEl.style.background = `conic-gradient(${style.fill} 0deg, ${style.fill} ${degrees}deg, rgba(255, 255, 255, 0.1) ${degrees}deg)`;
            }
        }

        function updateProficiencyBar(baseId, value) {
             const style = getCategoryAndStyle(value);
             document.getElementById(baseId + 'Display').textContent = value;
             document.getElementById(baseId + 'Category').textContent = `(${style.category})`;
             const barEl = document.getElementById(baseId + 'Bar');
             barEl.style.width = value + '%';
             
             if (style.category === 'Moderate') {
                 barEl.style.background = `repeating-linear-gradient(45deg, rgba(${BASE_COLOR}, 0.7), rgba(${BASE_COLOR}, 0.7) 5px, rgba(${BASE_COLOR}, 0.5) 5px, rgba(${BASE_COLOR}, 0.5) 10px)`;
             } else {
                 barEl.style.background = style.fill;
             }
        }

        function createStripePattern(ctx) {
            const patternCanvas = document.createElement('canvas');
            const patternCtx = patternCanvas.getContext('2d');
            patternCanvas.width = 8;
            patternCanvas.height = 8;
            patternCtx.strokeStyle = `rgba(${BASE_COLOR}, 0.8)`;
            patternCtx.lineWidth = 2;
            patternCtx.beginPath();
            patternCtx.moveTo(0, 8);
            patternCtx.lineTo(8, 0);
            patternCtx.stroke();
            return ctx.createPattern(patternCanvas, 'repeat');
        }

        function createCategorizedBarChart(canvasId, labels, data) {
            const ctx = document.getElementById(canvasId).getContext('2d');
            const lightData = data.map(v => getCategoryAndStyle(v).category === 'Light' ? v : null);
            const moderateData = data.map(v => getCategoryAndStyle(v).category === 'Moderate' ? v : null);
            const heavyData = data.map(v => getCategoryAndStyle(v).category === 'Heavy' ? v : null);
            
            return new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        { label: 'Light', data: lightData, backgroundColor: STYLES.LIGHT.fill },
                        { label: 'Moderate', data: moderateData, backgroundColor: createStripePattern(ctx) },
                        { label: 'Heavy', data: heavyData, backgroundColor: STYLES.HEAVY.fill }
                    ]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    plugins: {
                        legend: { display: true, labels: { color: '#ffffff' } },
                        tooltip: { callbacks: { label: (ctx) => `${ctx.dataset.label}: ${ctx.formattedValue}%` } }
                    },
                    scales: {
                        x: { stacked: true, ticks: { color: '#ffffff', font: { size: 10 }}, grid: { color: 'rgba(255, 255, 255, 0.1)' }},
                        y: { stacked: true, beginAtZero: true, max: 100, ticks: { color: '#ffffff', stepSize: 25, font: { size: 10 }}, grid: { color: 'rgba(255, 255, 255, 0.1)' }}
                    }
                }
            });
        }

        function createReceptionChart(receptionData) {
            if (receptionChartInstance) receptionChartInstance.destroy();
            const labels = ['Learning', 'Productivity', 'Utility/Services', 'Gaming', 'Social Media', 'Information'];
            receptionChartInstance = createCategorizedBarChart('receptionChart', labels, receptionData);
        }
        
        function createPlatformChart(platformData) {
            if (platformChartInstance) platformChartInstance.destroy();
            const labels = ['Application Load', 'Usage Load'];
            platformChartInstance = createCategorizedBarChart('platformChart', labels, platformData);
        }

        function showDashboard() {
            document.getElementById('formContainer').classList.add('hidden');
            document.getElementById('dashboardContainer').classList.remove('hidden');
            setTimeout(() => {
                document.querySelectorAll('.platform-fill').forEach(bar => {
                    const width = bar.style.width;
                    bar.style.width = '0%';
                    setTimeout(() => { bar.style.width = width; }, 100);
                });
            }, 500);
        }

        function showForm() {
            document.getElementById('dashboardContainer').classList.add('hidden');
            document.getElementById('formContainer').classList.remove('hidden');
            if (receptionChartInstance) { receptionChartInstance.destroy(); receptionChartInstance = null; }
            if (platformChartInstance) { platformChartInstance.destroy(); platformChartInstance = null; }
        }
    </script>
</body>
</html>